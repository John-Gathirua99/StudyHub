{% extends 'content/base.html' %}

{% block title %}Leaderboard{% endblock %}

{% block content %}
<div style="max-width: 1100px; margin: auto;">
  <h2 style="text-align: center; margin-bottom: 2rem;">🏆 Leaderboard</h2>

  <div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse; min-width: 800px;">
      <thead>
        <tr style="background-color: #f5f5f5; border-bottom: 2px solid #ccc;">
          <th style="padding: 12px; font-weight: bold; text-align: center;">Rank</th>
          <th style="padding: 12px; font-weight: bold; text-align: left;">Student</th>
          <th style="padding: 12px; font-weight: bold; text-align: center;">Lessons Completed</th>
          <th style="padding: 12px; font-weight: bold; text-align: center;">Total Score</th>
          <th style="padding: 12px; font-weight: bold; text-align: left;">Completed Lessons</th>
        </tr>
      </thead>
      <tbody>
        {% for entry in leaderboard %}
        <tr style="border-bottom: 1px solid #e0e0e0;">
          <td style="padding: 12px; text-align: center;">{{ entry.rank }}</td>
          <td style="padding: 12px; font-weight: bold; color: #2c3e50;">{{ entry.user.username }}</td>
          <td style="padding: 12px; text-align: center;">{{ entry.lessons_completed }}</td>
          <td style="padding: 12px; text-align: center; color: #e67e22;">{{ entry.total_score }}</td>
          <td style="padding: 12px;">
            {% if entry.lesson_titles %}
              <ul style="margin: 0; padding-left: 18px;">
                {% for lesson in entry.lesson_titles %}
                  <li>{{ lesson }}</li>
                {% endfor %}
              </ul>
            {% else %}
              <span style="color: #888;">—</span>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" style="padding: 16px; text-align: center;">No leaderboard data available.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
